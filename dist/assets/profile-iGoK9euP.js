import{R as p,c as j,r as d,j as e,L as m,p as g,s as h}from"./index-DF-tvaG2.js";import{u as b,H as v,a as y,F as w}from"./footer-CAGcrMy-.js";function F(){const{profile:a,refetch:u}=j(),{register:l,handleSubmit:x,formState:{errors:s},setValue:i}=b({mode:"onChange"}),[n,c]=d.useState(!1);d.useEffect(()=>{if(a?.firstName&&(i("firstName",a?.firstName),i("lastName",a?.lastName),i("email",a?.email),a?.dob)){const r=new Date(a.dob).toISOString().split("T")[0];i("dob",r)}},[a]);const N=async r=>{c(!0);try{const t=await g(r);t.error?h(t.message,"error"):(h(t.message,"success"),await u(),document.getElementById("closeAddMerchantModal").click())}catch{console.log("An error occurred")}finally{c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx("section",{className:"my-order",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"comman-spacing-top-bottom",children:[e.jsxs("h2",{className:"heading fw-medium",children:["Welcome",a?.firstName?",":""," ",e.jsxs("span",{className:"fw-semibold",children:[a?.firstName," ",a?.lastName]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"bg-white border shadow rounded-3 px-4 py-3",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 vh-100 d-none d-lg-block",children:e.jsxs("div",{className:"my-link-wrapper",children:[e.jsxs(m,{to:"/my-orders",className:"link-item ",children:[e.jsx("img",{src:"assets/image/icons/Cart.svg",alt:""}),e.jsx("span",{children:"My Orders"})]}),e.jsxs(m,{to:"/my-profile",className:"link-item active",children:[e.jsx("img",{src:"assets/image/icons/UserCircle.svg",alt:""}),e.jsx("span",{children:"Profile"})]}),e.jsxs(m,{to:"/my-addresses",className:"link-item ",children:[e.jsx("i",{class:"fas fa-location me-3",style:{color:"#727272"}}),e.jsx("span",{children:"Addresses"})]})]})}),e.jsx("div",{className:"col-lg-9 border-md-start",children:e.jsxs("div",{className:"px-1 py-3 px-md-4 py-md-4",children:[e.jsx("h2",{className:"heading",children:"My Profile"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"fs-6 fw-normal",children:"Personal Details"}),e.jsx("div",{className:"mt-4",children:e.jsxs("form",{className:"row g-4",onSubmit:x(N),children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:!0,className:"form-label",children:"First Name"}),e.jsx("input",{type:"text",className:`form-control ${s.firstName?"input-error":""}`,placeholder:"Enter first name",...l("firstName",{required:"First name is required",minLength:{value:2,message:"First name must be at least 2 characters"},maxLength:{value:50,message:"First name must be less than 50 characters"},pattern:{value:/^[A-Za-z\s]+$/,message:"First name can only contain letters and spaces"}})}),s.firstName&&e.jsx("p",{className:"form-error",children:s.firstName.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:!0,className:"form-label",children:"Last Name"}),e.jsx("input",{type:"text",className:`form-control ${s.lastName?"input-error":""}`,placeholder:"Enter last name",...l("lastName",{required:"Last name is required",minLength:{value:2,message:"Last name must be at least 2 characters"},maxLength:{value:50,message:"Last name must be less than 50 characters"},pattern:{value:/^[A-Za-z\s]+$/,message:"Last name can only contain letters and spaces"}})}),s.lastName&&e.jsx("p",{className:"form-error",children:s.lastName.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:!0,className:"form-label",children:"Email"}),e.jsx("input",{type:"email",className:`form-control ${s.email?"input-error":""}`,placeholder:"Enter email address",...l("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}})}),s.email&&e.jsx("p",{className:"form-error",children:s.email.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{htmlFor:!0,className:"form-label",children:"Birth Date"}),e.jsx("input",{type:"date",className:`form-control ${s.dob?"input-error":""}`,...l("dob",{required:!1,validate:{minAge:r=>{if(!r)return!0;const t=new Date(r),f=new Date,o=new Date;return o.setFullYear(f.getFullYear()-7),t<=o||"User must be at least 7 years old"}}}),max:new Date().toISOString().split("T")[0],min:(()=>{const r=new Date;return r.setFullYear(r.getFullYear()-100),r.toISOString().split("T")[0]})()}),s.dob&&e.jsx("p",{className:"form-error",children:s.dob.message})]}),e.jsx("div",{className:"col-12 mt-3",children:e.jsx("button",{type:"submit",className:"comman-btn-main ",disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"Saving..."}),e.jsx(y,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Save"})})]})})]})]})})]})})})]})})}),e.jsx(w,{})]})}const L=p.memo(F);export{L as default};
