import{R as h,a as x,u as j,j as s,b as u}from"./index-DQotRUfC.js";import{H as p,F as v}from"./footer-D0usDuYn.js";import{S as d}from"./skeleton-xDlkGdTe.js";function N(){let{id:c}=x();const{data:a,isLoading:i}=j({queryKey:["orderDetails",c],queryFn:()=>u(c),onError:e=>{console.log(e)},select:e=>e.results.order});console.log(a);const l=a?.products?.reduce((e,r)=>e+r.variantId.price*r.quantity,0),t=a?.products?.reduce((e,r)=>e+(r.variantId.discountPrice||r.variantId.price)*r.quantity,0),n=a?.products?.reduce((e,r)=>{const o=r.variantId.price*r.quantity,m=(r.variantId.discountPrice||r.variantId.price)*r.quantity;return e+(o-m)},0);return s.jsxs(s.Fragment,{children:[s.jsx(p,{}),s.jsx("section",{className:"order-confirmed-list",children:s.jsx("div",{className:"container comman-spacing-top-bottom",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-7 col-lg-6",children:s.jsxs("div",{className:"rounded-3 px-3 py-3 bg-white",children:[s.jsx("h2",{className:"heading fs-5",children:"Order summary"}),s.jsx("div",{className:"mt-4",children:i?Array.from({length:5}).map((e,r)=>s.jsx("div",{className:"cart-item d-flex align-items-center justify-content-between",children:s.jsxs("div",{className:"d-flex align-items-center gap-2 w-100",children:[s.jsx("div",{className:"cart-img",children:s.jsx(d,{})}),s.jsxs("div",{className:"w-100",children:[s.jsx("h6",{className:"product-heading",children:s.jsx(d,{style:{width:"90%"}})}),s.jsx("small",{className:"text-muted",children:s.jsx(d,{style:{width:"70%"}})}),s.jsx("p",{className:"fw-bold mb-0 mt-2",children:s.jsx(d,{style:{width:"50%"}})})]})]})},r)):a?.products?.map(e=>s.jsxs("div",{className:"cart-item d-flex align-items-center justify-content-between",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("div",{className:"cart-img",children:s.jsx("img",{src:e?.productId?.images?.[0],className:"rounded",alt:e?.productId?.images?.[0]})}),s.jsxs("div",{children:[s.jsxs("h6",{className:"product-heading",children:[" ",e.productId.name_en]}),s.jsxs("small",{className:"text-muted",children:[" ",e.productId.userId.shopName]}),s.jsxs("p",{className:"fw-bold mb-0 mt-2",children:["₹",e?.variantId?.price]})]})]}),s.jsx("div",{className:"d-flex align-items-center",children:s.jsxs("p",{className:"text",children:["Qty: ",e?.quantity]})})]},e.productId._id))}),s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"bill-details border-top pt-3 mt-3",children:[s.jsxs("p",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:[s.jsxs("del",{className:"text-muted",children:["₹",l||0]}),s.jsxs("strong",{className:"ms-2",children:["₹",t||0]})]})]}),s.jsxs("p",{className:"d-flex justify-content-between mb-3 text-success",children:[s.jsx("span",{children:"Discount"}),s.jsxs("span",{children:["-₹",n||0]})]}),s.jsxs("p",{className:"d-flex justify-content-between mb-3",children:[s.jsx("span",{children:"Delivery Charges"})," ",s.jsx("span",{children:"₹30"})]}),s.jsxs("p",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{children:"Platform Fees"})," ",s.jsx("span",{children:"₹5"})]}),s.jsxs("h6",{className:"d-flex justify-content-between fw-bold",children:[s.jsx("span",{children:"Total Payable"}),s.jsxs("span",{children:["₹",t+35]})]})]})}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h2",{className:"heading fs-6 font-medium",children:"Delivery Address"}),s.jsxs("p",{className:"text",children:[a?.address?.address_line2,","," ",a?.address?.address_line1]})]})]})}),s.jsx("div",{className:"col-md-5 col-lg-6",children:s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"rounded-3 px-3 py-3 bg-white",children:[s.jsx("h2",{className:"heading fs-5",children:"Your Delivery Partner"}),i?s.jsxs("div",{className:"w-100 mt-3",children:[s.jsx("h6",{className:"product-heading",children:s.jsx(d,{style:{width:"90%"}})}),s.jsx("small",{className:"text-muted",children:s.jsx(d,{style:{width:"70%"}})}),s.jsx("p",{className:"fw-bold mb-0 mt-2",children:s.jsx(d,{style:{width:"50%"}})})]}):s.jsxs("div",{className:"mt-4 d-flex align-items-center justify-content-between",children:[s.jsxs("div",{className:"d-flex gap-3 align-items-center delivery-partner",children:[s.jsx("div",{className:"user",children:s.jsx("img",{src:"../../assets/image/icons/delivery-man.png",className:"w-100 h-100",alt:""})}),s.jsxs("div",{className:"w-100",children:[s.jsx("h2",{children:a?.products[0]?.deliveryBoyId?.firstName?s.jsxs(s.Fragment,{children:[a?.products[0]?.deliveryBoyId?.firstName," ",a?.products[0]?.deliveryBoyId?.lastName]}):s.jsxs("div",{style:{lineHeight:"24px"},children:["Your delivery partner will be assigned soon!"," ",s.jsx("br",{})," Keep Checking!"]})}),a?.products[0]?.deliveryBoyId?.firstName?s.jsx("p",{children:"Delivery Partner"}):""]})]}),a?.products[0]?.deliveryBoyId?.countryCode?s.jsx("div",{className:"icon",children:s.jsx("a",{href:`tel:${a?.products[0]?.deliveryBoyId?.countryCode}${a?.products[0]?.deliveryBoyId?.phoneNumber}`,children:s.jsx("img",{src:"../../assets/image/icons/phone-white.svg",alt:"Call Delivery Boy"})})}):""]}),i?"":s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mt-4",children:[s.jsx("h2",{className:"heading mb-3 fs-5",children:"Order Status"}),a?.products?.[0]?.tracking?.map(e=>s.jsxs("div",{className:e.is_active?"items-check-points active-points active":"items-check-points",children:[s.jsx("div",{className:"icon",children:s.jsx("img",{src:e.status==="Placed"?"../../assets/image/icons/Check.svg":e.status==="Preparing"?"../../assets/image/icons/restaurant.png":e.status==="Out for Delivery"?"../../assets/image/icons/truck.svg":e.status==="Delivered"?"../../assets/image/icons/home.svg":"",alt:"",style:{width:"22px"}})}),s.jsx("h2",{children:e.status})]},e._id))]}),s.jsx("a",{href:a?.invoice,target:"_blank",rel:"noopener noreferrer",className:"text text-white comman-btn-main",children:"Download Invoice"})]})]})})})]})})}),s.jsx(v,{})]})}const b=h.memo(N);export{b as default};
