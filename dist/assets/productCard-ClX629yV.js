import{E as N,R as y,r as h,u as _,j as a,f as w,L as C,s as d,i as k,h as I}from"./index-8vkG74Yf.js";var A=N();function D({item:e,refetch2:c,home:j}){const[r,i]=h.useState(""),[l,o]=h.useState(!1),{token:g,refetch:m}=_(),p=async()=>{if(!r){d("Please select combination","error");return}o(!0);const s={productId:e._id,variantId:r,quantity:1};try{const t=await k(s);t.error?d(t.message,"error"):(document.querySelector(`#cartModal${e._id} [data-bs-dismiss="modal"]`).click(),d(t.message,"success"),await Promise.all([m(),c()]))}catch{console.log("An error occurred")}finally{o(!1)}},u=async(s,t,f)=>{f.preventDefault();const x=s.cartQuantity+t;if(x<0)return;const v={productId:s._id,variantId:s.variant._id,quantity:x};try{const n=await I(v);n.error?d(n.message,"error"):(d(n.message,"success"),await Promise.all([m(),c()]))}catch{console.log("An error occurred")}},b=a.jsx("div",{className:"modal fade",id:`cartModal${e?._id}`,tabIndex:-1,"aria-hidden":"true","data-bs-backdrop":"static",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsx("div",{className:"modal-header",children:a.jsx("h2",{className:"modal-heading m-0",children:"Customise as per your taste"})}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"list-group",children:e?.variants?.map(s=>a.jsxs("label",{className:"list-group-item d-flex justify-content-between align-items-center",children:[a.jsxs("div",{children:[a.jsx("input",{className:"form-check-input me-2",type:"radio",name:s._id,onChange:()=>i(s._id),checked:r===s._id}),s?.combination?.[0]?.attributeId?.name_en," (",s?.combination?.[0]?.valueId?.name_en,")"]}),a.jsxs("span",{className:"fw-bold",children:["â‚¹",s.price]})]},s._id))}),a.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[a.jsx("button",{className:"btn btn-light border","data-bs-dismiss":"modal",onClick:()=>i(""),children:"Cancel"}),a.jsx("button",{className:"comman-btn-main",onClick:()=>p(),disabled:l,children:l?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"me-2",children:"Wait..."}),a.jsx(w,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Add to Cart"})]})]})]})})});return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:j?"me-4":"col-md-4 col-lg-4 col-xl-4",children:a.jsx("div",{children:a.jsxs("div",{className:"custom-card wow animate__animated animate__fadeInUp","data-wow-delay":"0.2s",children:[a.jsx("div",{className:"custom-card-header",children:a.jsx(C,{to:`/product-details/${e?._id}`,children:a.jsx("img",{id:`product-img-${e._id}`,src:e?.images?.[0],alt:""})})}),a.jsxs("div",{className:"custom-card-body",children:[a.jsx("h2",{children:e?.name_en}),a.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[a.jsx("img",{src:"../assets/image/icons/Star.svg",className:"star",alt:""}),a.jsx("p",{className:"text",children:"4.8"}),a.jsx("p",{className:"text",children:e.userId?.shopName})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("img",{src:"../assets/image/icons/watch.svg",alt:""}),a.jsx("p",{className:"text",children:"30-40 min"})]}),g?e?.isAddedInCart&&e.cartQuantity>0?a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs("div",{className:"add-btn",children:[a.jsx("button",{onClick:s=>u(e,-1,s),disabled:e?.cartQuantity<=0,children:a.jsx("i",{className:"fa fa-minus"})}),a.jsx("button",{children:e?.cartQuantity}),a.jsx("button",{onClick:s=>u(e,1,s),children:a.jsx("i",{className:"fa fa-plus"})})]})}):a.jsx("button",{className:"comman-btn-main w-fit","data-bs-toggle":"modal","data-bs-target":`#cartModal${e?._id}`,onClick:s=>{s.preventDefault()},children:a.jsxs("div",{className:"d-flex gap-2 align-items-center h-100",children:[a.jsx("img",{src:"../assets/image/icons/plus.svg",alt:""}),"Add"]})}):a.jsx("button",{className:"comman-btn-main w-fit","data-bs-toggle":"modal","data-bs-target":"#addressModal",onClick:s=>{s.preventDefault()},children:a.jsxs("div",{className:"d-flex gap-2 align-items-center h-100",children:[a.jsx("img",{src:"../assets/image/icons/plus.svg",alt:""}),"Add"]})})]})})]})]})})},e?._id),A.createPortal(b,document.body)]})}const Q=y.memo(D);export{Q as P,A as r};
